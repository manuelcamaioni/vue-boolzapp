<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- BOOTSTRAP v5.2 -->

        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
            crossorigin="anonymous" />

        <!-- FONT AWESOME v6.4 -->

        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

        <link rel="stylesheet" href="style.css" />
        <script src="script.js" defer></script>

        <title>Vue Boolzapp</title>
    </head>
    <body>
        <!-- VUE3 -->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <div id="app" class="card" @click="addContacts">
            <div class="container-fluid p-0 m-0">
                <div class="row m-0">
                    <div
                        id="contacts-bar"
                        class="col-4 h-100 d-flex flex-column px-0">
                        <div
                            class="user-container d-flex justify-content-between align-items-center">
                            <div
                                class="user-profile d-flex align-items-center p-2">
                                <img src="img/avatar_7.jpg" alt="" />
                                <span class="ms-1">Manuel</span>
                            </div>
                            <div
                                id="user-actions"
                                class="d-flex align-items-center p-2">
                                <i class="fa-regular fa-circle fa-lg me-3"></i
                                ><i class="fa-regular fa-message fa-lg me-3"></i
                                ><i
                                    class="fa-solid fa-ellipsis-vertical fa-lg me-2"></i>
                            </div>
                        </div>
                        <div
                            id="toggle-msg-bar"
                            class="d-flex align-items-center px-4 py-3">
                            <div class="bell-container me-3">
                                <i class="fa-solid fa-bell-slash fa-xl"></i>
                            </div>
                            <div class="toggle-msg-info d-flex flex-column">
                                <span class="fw-bold fs-6"
                                    >Ricevi notifiche di nuovi messaggi</span
                                >
                                <a href="#" id="desktop-msg">
                                    <span class="fs-6"
                                        >Attiva notifiche desktop</span
                                    ></a
                                >
                            </div>
                        </div>
                        <div id="search-container" class="d-flex p-2">
                            <div class="searchbar d-flex">
                                <div
                                    class="col-2 m-glass d-flex align-items-center justify-content-center">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </div>
                                <div
                                    class="col-10 d-flex align-items-center justify-content-center px-2">
                                    <input
                                        type="text"
                                        v-model="searchContact"
                                        placeholder="Cerca o inizia una nuova chat"
                                        @click.stop="removeContacts"
                                        @keyup="addContactswhenSearching"
                                        id="input-searchbar" />
                                </div>
                            </div>
                        </div>
                        <div id="contacts-list" class="d-flex flex-column">
                            <div
                                class="contact-profile d-flex align-items-center p-2 position-relative"
                                v-for="(contact,index) in contacts"
                                @click="selectContact(index)"
                                :class="contact.visible === true ? '' : 'd-none', contacts.indexOf(contact) === activeIndex ? 'bg-grey' : ''"
                                @keyup="addContactswhenSearching">
                                <img :src="contact.avatar" alt="" />
                                <div class="d-flex flex-column ms-1">
                                    <span>{{contact.name}}</span>
                                    <span class="minor-text"
                                        >Ultimo messaggio inviato</span
                                    >
                                </div>
                                <span
                                    class="minor-text position-absolute timestamp"
                                    >12:00</span
                                >
                            </div>
                        </div>
                    </div>
                    <div class="col-8 h-100 px-0">
                        <div>
                            <div
                                class="user-container d-flex justify-content-between align-items-center">
                                <div
                                    class="d-flex align-items-center p-2 user-in-conv">
                                    <img
                                        :src="contacts[activeIndex].avatar"
                                        alt="" />
                                    <div class="d-flex flex-column ms-2">
                                        <span
                                            >{{contacts[activeIndex].name}}</span
                                        >
                                        <span class="minor-text"
                                            >Ultimo accesso oggi alle
                                            12:00</span
                                        >
                                    </div>
                                </div>
                                <div
                                    id="user-actions"
                                    class="d-flex align-items-center p-2">
                                    <i
                                        class="fa-solid fa-magnifying-glass fa-lg me-3"></i
                                    ><i
                                        class="fa-solid fa-paperclip fa-lg me-3"></i
                                    ><i
                                        class="fa-solid fa-ellipsis-vertical fa-lg me-2"></i>
                                </div>
                            </div>
                        </div>
                        <div id="display-msg" class="w-100 px-3">
                            <div
                                class="d-flex"
                                v-for="object in contacts[activeIndex].messages"
                                :class="(object.status === 'sent') ? 'user-message' : 'user-2-message'">
                                <p class="mb-0">
                                    {{object.message}}
                                    <span
                                        class="position-absolute timestamp-msg"
                                        >{{visibleTimeStamp(object.date)}}</span
                                    >
                                </p>
                            </div>
                        </div>
                        <div id="input-bar" class="d-flex">
                            <div class="container h-100 p-0 m-0">
                                <div class="row h-100 m-0">
                                    <div
                                        class="col d-flex justify-content-center align-items-center h-100">
                                        <i
                                            class="fa-regular fa-face-smile fa-xl"></i>
                                    </div>
                                    <div
                                        class="col-10 h-100 d-flex align-items-center p-2">
                                        <input
                                            type="text"
                                            placeholder="Scrivi un messaggio"
                                            class="w-100 p-2"
                                            v-model="newMsg"
                                            @keyup.enter="sendMessage" />
                                    </div>
                                    <div
                                        class="col h-100 d-flex justify-content-center align-items-center">
                                        <i
                                            class="fa-solid fa-microphone fa-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
